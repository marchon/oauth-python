{% block body %}
  <h2>Python Sample App</h2>
    
    <!-- <script>
    function hover(element) {
        element.setAttribute('src', "{{ url_for('static', filename='C2QB_green_btn_sm_hover.png') }}");
        element.setAttribute('width', '50');
        element.setAttribute('height', '50');

     }
    function unhover(element) {
        element.setAttribute('src', "{{ url_for('static', filename='C2QB_green_btn_sm_default.png') }}");
        element.setAttribute('width', '50');
        element.setAttribute('height', '50');
    }
    </script>

     <a href="{{ url_for('login') }}"><img id="my-img" src="{{ url_for('static', filename='C2QB_green_btn_sm_default.png') }}" onmouseover="hover(this);" onmouseout="unhover(this);" /></a>  -->

    <script src="https://js.appcenter.intuit.com/Content/IA/intuit.ipp.anywhere-1.3.3.js" type="text/javascript"></script>
    <script type="text/javascript">
        intuit.ipp.anywhere.setup({
            grantUrl: 'http://localhost:5000/login',
            datasources: {
                 quickbooks : true,
                 payments : false
           }
        });
    </script>
    <ipp:connectToIntuit></ipp:connectToIntuit>
    <button type="button" onClick="{{ url_for('reset_session') }}">Reset Session</button>
    {% if session['is_authorized'] == True %}
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <ul>
                    {% for message in messages %}
                        <li style="background-color:#E6E6FA; color: {{ text_color }};">{{ message[1] }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
	    {% endwith %}
	    <form action="/" method="post">
		    <table>
			    <tr style="font-weight:bold">
				    <td width="20%">No.</td>
				    <td width="20%">ID</td>
				    <td width="20%">Full Name</td>
				    <td width="20%">Phone</td>
				    <td width="20%">Email</td>
				    <td width="20%"></td>
			    </tr>

			    {% for customer in customer_dict %}
			        <tr>
				        <td width="20%">{{ loop.index }}</td>
				        <td width="20%">{{ customer['Id'] }}
				        {% set req_id = customer['Id'] %}</td>
				        <td width="20%">{{ customer['Full Name'] }}</td>
				        <td width="20%">{{ customer['Phone'] }}</td>
				        <td width="20%">{{ customer['Email'] }}</td>
				        <td><button type="submit" name="id" value="{{ req_id }}" onclick="{{ url_for('update_table') }}">Add as a Customer</button></td>				
			    </tr>
			    {% endfor %}
		    </table>
	    </form>
    {% endif %}
    
{% endblock %}

